# airbrush service
type airbrush, domain;
type airbrush_exec, exec_type, vendor_file_type, file_type;

init_daemon_domain(airbrush)

hwbinder_use(airbrush)
add_hwservice(airbrush, hal_airbrush_hwservice)
add_service(airbrush, airbrush_faceauth_service)
add_service(airbrush, airbrush_tpu_service)
get_prop(airbrush, hwservicemanager_prop)

allow airbrush airbrush_sm_device:chr_file { rw_file_perms };

# TODO(vharron) Enable HAL/GCA to access the binder interface.
# allow airbrush google_camera_app:binder call;
# allow airbrush hal_camera_default:binder call;
allow airbrush hal_graphics_allocator_default:fd use;
allow airbrush ion_device:chr_file r_file_perms;

# Allow Airbrush to make binder calls to Darwinn and vice versa
allow airbrush darwinn_service:service_manager find;
binder_call(airbrush, hal_neuralnetworks_darwinn)
binder_call(hal_neuralnetworks_darwinn, airbrush)

# Allow Airbrush to access the TPU device.
allow airbrush abc_tpu_device:chr_file getattr;

vndbinder_use(airbrush)
