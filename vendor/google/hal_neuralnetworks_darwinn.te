type hal_neuralnetworks_darwinn, domain;
hal_server_domain(hal_neuralnetworks_darwinn, hal_neuralnetworks)

type hal_neuralnetworks_darwinn_exec, exec_type, vendor_file_type, file_type;
init_daemon_domain(hal_neuralnetworks_darwinn)

# The TPU HAL looks for TPU instance in /sys/class/abc-pcie-tpu/.
allow hal_neuralnetworks_darwinn sysfs:dir { open read };

# And opens the device at /dev/abc-pcie-tpu_0.
allow hal_neuralnetworks_darwinn abc_tpu_device:chr_file { getattr ioctl map open read write };

# Allow opening airbrush devices (DRAM and DMA drivers).
allow hal_neuralnetworks_darwinn airbrush_device:chr_file rw_file_perms;

allow hal_neuralnetworks_darwinn hal_airbrush_hwservice:hwservice_manager find;

allow hal_neuralnetworks_darwinn airbrush_tpu_service:service_manager find;
binder_call(hal_neuralnetworks_darwinn, airbrush)
add_service(hal_neuralnetworks_darwinn, darwinn_service)
vndbinder_use(hal_neuralnetworks_darwinn)
